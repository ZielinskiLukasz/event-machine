<doctype html />
<html>
<head></head>
<body><h1>test</h1>
<script src="stomp.min.js"></script>
<script>
    // Stomp.js boilerplate
    if (location.search == '?ws') {
        var client = Stomp.client('ws://' + window.location.hostname + ':15674/ws');
    } else {
        var ws = new SockJS('http://' + window.location.hostname + ':15674/stomp');
        var client = Stomp.over(ws);
    }

    var on_connect = function(x) {
        id = client.subscribe("/topic/test", function(d) {
            console.log("received message", d.body);
        });
    };
    var on_error =  function() {
        console.log('error');
    };
    client.connect('guest', 'guest', on_connect, on_error, '/');

    window.setTimeout(function () {
        console.log("send test");
        client.send('/topic/test', {"content-type":"text/plain"}, "it works");

    }, 1000);
</script>
</body>
</html>